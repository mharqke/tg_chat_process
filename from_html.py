






FILES_AMOUNT = 225


from bs4 import BeautifulSoup
list = {}
for num in range(1, FILES_AMOUNT+1):
  print(str(int(num/(FILES_AMOUNT/100)))+"%\r", end="")
  with open(f"messages{num}.html", "r", encoding="utf8") as file:
      html_content = file.read()
  soup = BeautifulSoup(html_content, "html.parser")
  elements = soup.find_all(class_="from_name")
  for element in elements:
    element = element.get_text().split("\n")[1]
    try:
      list[element] += 1
    except:
      list.update({f"{element}": 0}) 
      list[element] += 1
print("100%\r\n")
k = 0
data = open("data.txt", "a", encoding="utf8")
list = dict(sorted(list.items(), key=lambda item: item[1]))
list = dict((v, k) for k, v in list.items())
for i in list:
  try:
    if i < 5:
      continue
    data.write(str(i))
    data.write(";")
    data.write(str(list[i]))
    data.write("\n")
    print(i, list[i])
  except:
    k += 1
    continue
print(k)
print(len(list))






























































































































































































































































































































































































































